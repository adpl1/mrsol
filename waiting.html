<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/>
  <title>انتظار المندوب</title>
  <style>
    *{box-sizing:border-box;margin:0;padding:0}
    html,body{height:100%;font-family:"Segoe UI",sans-serif;background:#eef2ff;color:#333;direction:rtl}
    .container{padding:2rem;text-align:center}
    .container h2{margin-bottom:1rem;color:#000DFF}
    .invoice{background:#fff;padding:1rem;border-radius:8px;box-shadow:0 2px 6px rgba(0,0,0,0.1);margin-bottom:1rem;text-align:left}
    .invoice div{margin:.5rem 0}
    .status{margin-top:1.5rem;color:#ffa500;font-weight:bold;display:flex;align-items:center;justify-content:center;gap:.5rem}
    /* spinner */
    .spinner {
      width:24px;height:24px;
      border:4px solid #ccc;border-top-color:#000DFF;
      border-radius:50%;animation:spin 1s linear infinite;
    }
    @keyframes spin{to{transform:rotate(360deg)}}
    button{margin-top:1.5rem;padding:.75rem 1rem;border:none;border-radius:6px;background:#000DFF;color:#fff;cursor:pointer;}
  </style>
</head>
<body>
  <div class="container">
    <h2>نبحث عن مندوب...</h2>
    <div id="invoice" class="invoice"></div>
    <div class="status"><div class="spinner"></div> نبحث عن مندوب لاستلام طلبك</div>
    <button onclick="location.href='home.html'">رجوع للرئيسية</button>
  </div>
  <script>
    // جلب الطلب الحالي
    const ord = JSON.parse(sessionStorage.getItem('currentOrder')||'null');
    const inv = document.getElementById('invoice');
    if(!ord){ inv.innerHTML='<p>لا يوجد طلب حالي.</p>'; }
    else{
      const d = new Date(ord.ts);
      inv.innerHTML = `
        <div><strong>رقم الطلب:</strong> ${ord.orderNum}</div>
        <div><strong>المتجر:</strong> ${ord.store}</div>
        <div><strong>الطلب:</strong> ${ord.txt}</div>
        <div><strong>التاريخ:</strong> ${d.toLocaleDateString('ar-EG')} ${d.toLocaleTimeString('ar-EG')}</div>
      `;
    }
  </script>
</body>
</html>
